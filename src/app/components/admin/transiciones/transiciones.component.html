<div *ngIf="tramites">
    <div class="col-md-4">
        <div class="mt-3">
            <h2>Todos los trámites</h2>
        </div>
    </div>
    <table class="table table-striped" >
        <thead>
            <tr>
                <th>Último Tramite</th>
                <th>N° Expediente</th>
                <th>Fecha</th>
                <th>Sector</th>
                <th>Opciones</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let historial of tramites | paginate: { itemsPerPage: 10, currentPage: p, totalItems: tramites.length }">
                <td>{{ historial.tramite.numero }}{{ historial.tramite.codigo_verificacion }}</td>
                <td>{{ historial.tramite.expediente.numero }}-{{ historial.tramite.expediente.anio }}</td>
                <td>{{ historial.fecha_entrada | date:'short' }}</td>
                <td>
                    <select id="sectores" (change)="onChange($event.target.value)" [multiple]="false" [closeOnSelect]="true">
                        <option value="" [selected]="true" disabled>{{ historial.transicion.sector_sucesor.nombre }}</option>
                        <option *ngFor="let sector of sectores" [value]="[sector.id,historial.tramite.id]">{{sector.nombre}}</option>
                    </select>  
                </td>
                <td>
                    <a [routerLink]="['/tramite/', historial.tramite.id ]" ><span style="color: white; background-color: black; padding: 5px 10px 5px 10px; border-radius: 100px;"><i class="fa fa-info"></i></span></a>
                    <a (click)="eliminar(historial.tramite.id)" ><span style="color: rgb(248, 9, 9); padding: 10px; border-radius: 50px;"><i class="fa fa-times"></i></span></a>
                    <a [routerLink]="['/tramite/editar/', historial.tramite.id ]"  ><span><span style="color: rgb(248, 152, 9); padding: 10px; border-radius: 50px;"><i class="fas fa-edit"></i></span></span></a>
                </td>
            </tr>
        </tbody>
    </table>

    <div class="d-flex justify-content-center">
        <pagination-controls class="paginator" (pageChange)="onTableDataChange($event)"></pagination-controls>
    </div>

</div> 
<ngx-spinner></ngx-spinner>

<swal #mensajeSwal title icon confirmButtonText cancelButtonText showCancelButton cancelButtonColor confirmButtonColor confirm></swal>