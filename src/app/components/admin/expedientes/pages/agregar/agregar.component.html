

<div class="container">

    <h2 *ngIf="isAddMode" style="font-weight: bold;">Crear Expediente</h2>
    <h2 *ngIf="!isAddMode" style="font-weight: bold;">Editar Expediente</h2>

    <br>

    <div class="row">
        <div class="col-12">
             <form class="row g-3" [formGroup]="expedienteForm" (ngSubmit)="onSubmit()">
                <div class="col-md-6">

                  <div class="form-group">
                    <label for="tipo" class="form-label">Tipo</label>
                    <select *ngIf="tipos_expedientes" formControlName="tipo_expediente" name="" class="form-control" id="" [ngClass]="{ 'is-invalid': submitted && f.tipo_expediente.errors }">
                      <option value="" disabled>Seleccione una Opcion</option>
                      <option [ngValue]="dato" *ngFor="let dato of tipos_expedientes.results">{{dato.descripcion}}</option>
                    </select>
                    <div *ngIf="submitted && f.tipo_expediente.errors" class="invalid-feedback">
                      <div *ngIf="f.tipo_expediente.errors.required">Este campo es obligatorio</div>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="inmueble" class="form-label">Inmueble</label>
                    <select *ngIf="inmuebles" formControlName="inmueble" name="" class="form-control" id="" [ngClass]="{ 'is-invalid': submitted && f.inmueble.errors }">
                      <option value="" disabled>Seleccione una Opcion</option>
                      <option [ngValue]="dato" *ngFor="let dato of inmuebles.results" value="">{{dato.datos}}</option>
                    </select>
                    <div *ngIf="submitted && f.inmueble.errors" class="invalid-feedback">
                      <div *ngIf="f.inmueble.errors.required">Este campo es obligatorio</div>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="propietario" class="form-label">Propietario</label>
                    <select *ngIf="usuarios" formControlName="propietario"  name="" class="form-control" id="" [ngClass]="{ 'is-invalid': submitted && f.propietario.errors }">
                      <option value="" disabled>Seleccione una Opcion</option>
                      <option [ngValue]="dato" *ngFor="let dato of usuarios.results" value="">{{dato.nombre}}</option>
                    </select>
                    <div *ngIf="submitted && f.propietario.errors" class="invalid-feedback">
                      <div *ngIf="f.propietario.errors.required">Este campo es obligatorio</div>
                    </div>
                  </div>

                  <div *ngIf="documentos" class="form-group">
                    <label for="propietario" class="form-label">Documentos</label>
                    <ng-multiselect-dropdown
                      [placeholder]="'Seleccione una opcion'"
                      [settings]="dropdownSettings"
                      [data]="documentos.results"
                      
                      (onSelect)="onItemSelect($event)"
                      (onSelectAll)="onSelectAll($event)"
                    >
                    </ng-multiselect-dropdown>


                    <div *ngIf="submitted && f.propietario.errors" class="invalid-feedback">
                      <div *ngIf="f.propietario.errors.required">Este campo es obligatorio</div>
                    </div>
                  </div>


                







                    <div class="col-3">
                      <button type="button" class="btn btn-primary">Volver</button>
                    </div>
                </div>
                <div class="col-md-6">

                  <div class="form-group">
                    
                    <label for="abreviatura" class="form-label">Abreviatura</label>
                    <input formControlName="abreviatura" type="text" class="form-control" id="inputPassword4" [ngClass]="{ 'is-invalid': submitted && f.abreviatura.errors }">
                    <div *ngIf="submitted && f.abreviatura.errors" class="invalid-feedback">
                      <div *ngIf="f.abreviatura.errors.required">Este campo es obligatorio</div>
                    </div>

                  </div>
                  
                    <div class="form-group">
                      <label for="observacion" class="form-label">Observacion</label>
                      <select formControlName="observacion" *ngIf="observaciones"  name="" class="form-control" id="" [ngClass]="{ 'is-invalid': submitted && f.observacion.errors }">
                        <option value="" disabled>Seleccione una Opcion</option>
                        <option [ngValue]="dato" *ngFor="let dato of observaciones.results" value="">{{dato.descripcion}}</option>
                      </select>

                      <div *ngIf="submitted && f.observacion.errors" class="invalid-feedback">
                        <div *ngIf="f.observacion.errors.required">Este campo es obligatorio</div>
                      </div>

                    </div>

                    <div class="form-group">
                      <label for="agrimensor" class="form-label">Agrimensor</label>
                      <select *ngIf="usuarios" formControlName="agrimensor"  name="" class="form-control" id="" [ngClass]="{ 'is-invalid': submitted && f.agrimensor.errors }">
                        <option value="" disabled>Seleccione una Opcion</option>
                        <option [ngValue]="dato" *ngFor="let dato of usuarios.results" value="">{{dato.nombre}}</option>
                      </select>
                      <div *ngIf="submitted && f.agrimensor.errors" class="invalid-feedback">
                        <div *ngIf="f.agrimensor.errors.required">Este campo es obligatorio</div>
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="gestor" class="form-label">Gestor</label>
                      <select *ngIf="usuarios" formControlName="gestor"  name="" class="form-control" id="" >
                        <option value="" disabled>Seleccione una Opcion</option>
                        <option [ngValue]="dato" *ngFor="let dato of usuarios.results" value="">{{dato.nombre}}</option>
                      </select>
                    </div>

                    <div class="row">

                      <div class="col-md-6">
                        <button type="button" class="btn btn-primary">Cancelar</button>
                        <!-- <button type="submit" class="btn btn-primary" >Guardar</button> -->
                      </div>

                      <div class="col-md-6">

                        <button type="submit" [disabled]="loading" class="btn btn-primary">
                          <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                          Guardar
                        </button>

                      </div>
                      
                    </div>  
                </div>
               
                
              </form>  
    </div>
    </div>
    
    <hr>


</div>